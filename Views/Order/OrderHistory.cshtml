@model IEnumerable<FigureShop.Models.Order>
@{
    ViewData["Title"] = "Đơn hàng của tôi";
}

<style>
    .order-card {
        background: #ffffff;
        border-radius: 24px;
        box-shadow: 0 4px 24px rgba(0,0,0,0.08);
        padding: 40px 32px;
        margin-top: 48px;
        margin-bottom: 32px;
        transition: 0.3s ease;
    }

    .order-title {
        font-size: 2.2rem;
        font-weight: 700;
        color: #1a237e;
        margin-bottom: 32px;
        text-align: center;
    }

    .order-table {
        border-radius: 12px;
        overflow: hidden;
    }

    .order-table thead th {
        font-size: 1.1rem;
        color: #fff;
        background: linear-gradient(90deg, #1976d2, #42a5f5);
        border: none;
        text-align: center;
        padding: 16px;
    }

    .order-table tbody td {
        font-size: 1rem;
        padding: 16px 12px;
        vertical-align: middle;
        text-align: center;
        background-color: #f5f7fa;
    }

    .order-id {
        font-weight: 600;
        color: #0d47a1;
    }

    .order-status {
        font-size: 0.95rem;
        font-weight: 600;
        padding: 6px 12px;
        border-radius: 12px;
        display: inline-block;
        background-color: #eeeeee;
        color: #000;
    }

    .order-btn {
        display: inline-block;
        padding: 10px 18px;
        font-size: 1rem;
        border-radius: 22px;
        font-weight: 600;
        background: linear-gradient(90deg,#1976d2,#ffca28);
        color: #fff;
        text-decoration: none;
        transition: 0.3s ease;
        border: none;
    }

    .order-btn:hover {
        background: linear-gradient(90deg,#ffca28,#1976d2);
        color: #1a237e;
    }

    .empty-message {
        font-size: 1.2rem;
        padding: 48px 0;
        color: #777;
    }
</style>

@Html.Raw(@"<style>
    @media (max-width: 768px) {
        .order-title {
            font-size: 1.4rem;
        }
        .order-table thead {
            display: none;
        }
        .order-table tbody td {
            display: block;
            text-align: right;
            padding: 12px;
            border-bottom: 1px solid #ddd;
            position: relative;
        }
        .order-table tbody td::before {
            content: attr(data-label);
            position: absolute;
            left: 12px;
            text-align: left;
            font-weight: bold;
            color: #555;
        }
        .order-table tbody tr {
            margin-bottom: 20px;
            display: block;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
    }
</style>")

<div class="container" style="max-width: 1000px;">
    <div class="order-card">
        <h2 class="order-title">Đơn hàng của bạn</h2>
        <div class="table-responsive">
            <table class="table order-table">
                <thead>
                    <tr>
                        <th>Mã đơn</th>
                        <th>Ngày đặt</th>
                        <th>Tổng tiền</th>
                        <th>Trạng thái</th>
                        <th>Chi tiết</th>
                    </tr>
                </thead>
                <tbody>
                    @if (!Model.Any())
                    {
                        <tr>
                            <td colspan="5" class="text-center empty-message">
                                Bạn chưa có đơn hàng nào.
                            </td>
                        </tr>
                    }
                    else
                    {
                        foreach (var order in Model)
                        {
                            var statusColor = GetStatusColor(order.Status);
                            <tr>
                                <td class="order-id" data-label="Mã đơn">#@order.Id</td>
                                <td data-label="Ngày đặt">@order.OrderDate.ToString("dd/MM/yyyy HH:mm")</td>
                                <td data-label="Tổng tiền" class="text-warning fw-bold">
                                    @order.TotalAmount.ToString("N0") ₫
                                </td>
                                <td data-label="Trạng thái">
                                    <span class="order-status" style="background-color:@statusColor;">
                                        @order.Status
                                    </span>
                                </td>
                                <td data-label="Chi tiết">
                                    <a href="@Url.Action("OrderSuccess", new { orderId = order.Id })" class="order-btn">Xem</a>
                                </td>
                            </tr>
                        }
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>

@functions {
    public string GetStatusColor(string status)
    {
        return status switch
        {
            "Preparing" => "#ffcc80",     // cam nhạt
            "Shipped" => "#90caf9",       // xanh nhạt
            "Completed" => "#a5d6a7",     // xanh lá nhạt
            "Cancelled" => "#ef9a9a",     // đỏ nhạt
            _ => "#e0e0e0"                // xám nhạt
        };
    }
}
